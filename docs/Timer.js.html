<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Timer.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Timer.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*******************************************************************************************
 * Program: Timer.js
 * Description:
 *   Provides a countdown timer for the Battleship game.
 *   - Tracks remaining time in seconds
 *   - Supports start, pause, resume, and reset operations
 *   - Can render the timer visually on the canvas
 *
 * Inputs:
 *   - p5 instance for rendering and time calculations
 *   - x, y coordinates to display the timer
 *   - Countdown duration in seconds
 *
 * Output:
 *   - Countdown display on canvas
 *   - Timer state information (remaining time, finished or not)
 *
 * Collaborators:
 *   - Brendan Coughlan
 *   - Jiaxing Rong
 *
 * Creation Date: 2026-02-28
 * Revision Dates:
 *   - N/A
 *******************************************************************************************/

/* =========================
   Timer
========================= */
/**
 * Represents a timer object during gameplay.
 * @class
 */
export class Timer {
  /**
   * Constructor of timer
   * @param {object} p p5 instance
   * @param {number} x X coordinate where the timer text will be displayed
   * @param {number} y Y coordinate where the timer text will be displayed
   * @param {number} seconds Initial countdown duration in seconds
   */
  constructor(p, x, y, seconds) {
    this.p = p;
    this.x = x;
    this.y = y;

    // initial duration
    this.initial = seconds;
    // remaining time
    this.remaining = seconds;
    // whether timer is counting down
    this.running = false;
    // last timestamp used to compute delta time
    this.lastMs = p.millis();
  }

  /**
   * Starts the timer.
   * @param {number} [seconds=this.initial] Duration to start the timer with (seconds).
   * @returns {void}
   */
  start(seconds = this.initial) {
    this.initial = seconds;
    this.remaining = seconds;
    this.running = true;
    this.lastMs = this.p.millis();
  }

  /**
   * Updates the remaining time. Call once per frame while rendering.
   * @returns {void}
   */
  update() {
    if (!this.running) return;

    const now = this.p.millis();
    // convert milliseconds to seconds
    const dt = (now - this.lastMs) / 1000;
    this.lastMs = now;

    this.remaining -= dt;
    if (this.remaining &lt; 0) this.remaining = 0;
  }

  /**
   * Renders the timer and updates its countdown state.
   * @returns {void}
   */
  render() {
    this.update();

    const p = this.p;
    const text = `Time: ${Math.ceil(this.remaining)}`;

    p.push();

    const fontSize = 36;
    p.textSize(fontSize);

    p.textAlign(p.CENTER, p.CENTER);

    // measure text
    const paddingX = 25;
    const paddingY = 15;
    const w = p.textWidth(text) + paddingX * 2;
    const h = fontSize + paddingY * 2;

    // draw rectangle background
    p.rectMode(p.CENTER);
    p.fill(255); // white background
    p.stroke(0); // border
    p.strokeWeight(3);
    p.rect(this.x, this.y, w, h, 10); // rounded corners

    // draw text
    p.noStroke();
    p.fill(0);
    p.text(text, this.x, this.y);

    p.pop();
  }

  /**
   * Pauses the timer.
   * @returns {void}
   */
  pause() {
    this.running = false;
  }

  /**
   * Resumes the timer if there is remaining time.
   * @returns {void}
   */
  resume() {
    if (this.remaining &lt;= 0) return;
    this.running = true;
    this.lastMs = this.p.millis();
  }

  /**
   * Resets remaining time but does not start the timer.
   * @param {number} [seconds=this.initial] New remaining time in seconds.
   * @returns {void}
   */
  reset(seconds = this.initial) {
    this.remaining = seconds;
    this.lastMs = this.p.millis();
  }

  /**
   * Checks whether the timer has reached zero.
   * @returns {boolean} True if countdown finished.
   */
  isFinished() {
    return this.remaining &lt;= 0;
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-plugins_confirmWindow.html">plugins/confirmWindow</a></li><li><a href="module-plugins_selNumWindow.html">plugins/selNumWindow</a></li><li><a href="module-plugins_toastsWindow.html">plugins/toastsWindow</a></li></ul><h3>Classes</h3><ul><li><a href="Board.html">Board</a></li><li><a href="Cell.html">Cell</a></li><li><a href="GameManager.html">GameManager</a></li><li><a href="Player.html">Player</a></li><li><a href="Ship.html">Ship</a></li><li><a href="Timer.html">Timer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Sat Feb 28 2026 17:31:12 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
