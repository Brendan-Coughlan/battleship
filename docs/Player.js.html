<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Player.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Player.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*******************************************************************************************
 * Program: Player.js
 * Description:
 *   Represents a Battleship game player.
 *   - Holds the player's board
 *   - Stores all ships placed by the player
 *   - Handles ship placement using current orientation
 *   - Handles ship rotation during setup
 *   - Supports firing at the board (when targeted by opponent)
 *   - Allows ship deletion during setup
 *   - Provides status checks (e.g., whether all ships are sunk)
 *
 * Inputs:
 *   - Board instance to operate on
 *   - Mouse coordinates for ship placement, deletion, and firing
 *   - Ship length for placement
 *
 * Output:
 *   - Boolean results for placement, firing, and deletion actions
 *   - Ship and board state updates
 *   - Ship status information (all sunk or not)
 *
 * Collaborators:
 *   - Brendan Coughlan
 *   - Jiaxing Rong
 *
 * Creation Date: 2026-02-28
 * Revision Dates:
 *   - 2/28/2026 Updated to encapsulate orientation, firing, and deletion logic
 *******************************************************************************************/

/* =========================
   Player
========================= */
/**
 * Represents a Battleship game player.
 * @class
 */
export class Player {
  /**
   * Creates a player instance.
   * @param {number} id - Unique player ID (typically 1 or 2).
   * @param {Board} board - The player's board instance.
   */
  constructor(id, board) {
    this.id = id;
    this.board = board;

    this.ships = {};

    this.orientation = "N";
  }

  /**
   * Place a ship using canvas coordinates.
   * @param {number} x
   * @param {number} y
   * @param {number} length
   * @returns {boolean} true if placed successfully
   */
  placeShipAt(x, y, length) {
    const cell = this.board.getCellAt(x, y);
    if (!cell) return false;

    const placedShip = this.board.placeShip(
      cell.col,
      cell.row,
      length,
      this.orientation,
    );

    if (!placedShip) return false;

    this.ships[length] = placedShip;
    return true;
  }

  /**
   * Fires at this player's board using canvas coordinates.
   * @param {number} x
   * @param {number} y
   * @returns {{ ok: boolean, isHit: (boolean|undefined), cell: (*|undefined) }}
   */
  fireAt(x, y) {
    const cell = this.board.getCellAt(x, y);
    if (!cell) return { ok: false };
    if (cell.state !== "EMPTY") return { ok: false };

    const isHit = cell.fire(); // your Cell.fire() already returns hit/miss
    return { ok: true, isHit, cell };
  }

  /**
   * Deletes a ship at given coordinates.
   * @returns {boolean} True if a ship was deleted.
   */
  deleteShipAt(x, y) {
    const cell = this.board.getCellAt(x, y);

    if (!cell || !cell.ship) return false;

    const ship = cell.ship;
    const shipCells = ship.cells || [];

    for (const c of shipCells) {
      c.ship = null;
    }

    const len = shipCells.length;
    if (len in this.ships) {
      delete this.ships[len];
    }
    return true;
  }

  /**
   * Rotates the ships orientation when placing
   */
  rotateShip() {
    const directions = ["N", "E", "S", "W"];
    const idx = directions.indexOf(this.orientation);
    this.orientation = directions[(idx + 1) % directions.length];
  }

  /**
   * Get current ship direction
   * @returns {string} "N", "E", "S", "W"
   */
  getOrientation() {
    return this.orientation;
  }

  /**
   * Retrieves a cell from the player's board.
   *
   * @param {number} x - X coordinate in canvas space.
   * @param {number} y - Y coordinate in canvas space.
   * @returns {any} The board cell at the specified position.
   */
  getCellAt(x, y) {
    return this.board.getCellAt(x, y);
  }

  /**
   * Checks if all ships belonging to this player are sunk.
   *
   * @returns {boolean} True if all ships are destroyed.
   */
  allShipsSunk() {
    return this.board.allShipsSunk();
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-plugins_confirmWindow.html">plugins/confirmWindow</a></li><li><a href="module-plugins_selNumWindow.html">plugins/selNumWindow</a></li><li><a href="module-plugins_toastsWindow.html">plugins/toastsWindow</a></li></ul><h3>Classes</h3><ul><li><a href="Board.html">Board</a></li><li><a href="Cell.html">Cell</a></li><li><a href="GameManager.html">GameManager</a></li><li><a href="Player.html">Player</a></li><li><a href="Ship.html">Ship</a></li><li><a href="Timer.html">Timer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Sat Feb 28 2026 17:31:12 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
