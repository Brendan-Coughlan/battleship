<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: plugins/selNumWindow.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: plugins/selNumWindow.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * A pop-up window plugin that lets the user select a number.
 * @module plugins/selNumWindow
 * @param {Object} [options={}] Configuration of the window.
 * @param {string} [options.title="Title"] Modal title.
 * @param {string} [options.message="message"] Modal message.
 * @param {string} [options.yesText="Yes"] Confirm button text.
 * @param {string} [options.noText="No"] Cancel button text.
 * @param {boolean} [options.lockScroll=true] Whether to lock page scrolling while open.
 * @param {number} [options.min=1] Minimum selectable number.
 * @param {number} [options.max=10] Maximum selectable number.
 * @param {number} [options.defaultValue=1] Default selected value (must be within [min, max]).
 *
 * @returns {{ render: function(): Promise&lt;{ok: boolean, value: (number|null)}>, getIsOpen: function(): boolean }}
 * An object containing:
 * - render(): opens the modal and resolves with the user's choice
 * - getIsOpen(): returns whether the modal is currently open
 */
export function selNumWindow(options = {}) {
  // default configuration of the window
  const defaults = {
    title: "Title",
    message: "message",
    yesText: "Yes",
    noText: "No",
    lockScroll: true,
    min: 1,
    max: 10,
    defaultValue: 1,
  };

  // merge options config with default config
  // if not provided in options, use default
  const config = { ...defaults, ...options };
  // flag to check if the pop up window is active
  // if the window is still active, no game interaction is allowed
  let isOpen = false;

  /**
   * Shows the pop-up window and resolves with the user's selection.
   * @returns {Promise&lt;{ok: boolean, value: (number|null)}>} User choice result.
   */
  function render() {
    if (isOpen) return Promise.resolve({ ok: false, value: null });
    isOpen = true;

    const prevOverflow = document.body.style.overflow;
    if (config.lockScroll) document.body.style.overflow = "hidden";

    const min = config.min;
    const max = config.max;

    // pick a safe default
    let initial;
    if (
      Number.isInteger(config.defaultValue) &amp;&amp;
      config.defaultValue >= config.min &amp;&amp;
      config.defaultValue &lt;= config.max
    ) {
      initial = config.defaultValue;
    } else {
      initial = config.min;
    }

    // build &lt;option> list
    const optionsHtml = Array.from({ length: max - min + 1 }, (_, i) => {
      const n = min + i;
      return `&lt;option value="${n}" ${n === initial ? "selected" : ""}>${n}&lt;/option>`;
    }).join("");

    return new Promise((resolve) => {
      const overlay = document.createElement("div");
      overlay.className = "ipp-overlay";

      const modal = document.createElement("div");
      modal.className = "ipp-modal";

      modal.innerHTML = `
        &lt;h3 class="ipp-title">${config.title}&lt;/h3>
        &lt;p class="ipp-message">${config.message}&lt;/p>

        &lt;select class="ipp-input" aria-label="Choose a number">
          ${optionsHtml}
        &lt;/select>

        &lt;div class="ipp-actions">
          &lt;button class="ipp-btn ipp-btn-yes">${config.yesText}&lt;/button>
          &lt;button class="ipp-btn ipp-btn-no">${config.noText}&lt;/button>
        &lt;/div>
      `;

      overlay.append(modal);
      document.body.appendChild(overlay);

      const select = modal.querySelector("select.ipp-input");
      const btnYes = modal.querySelector(".ipp-btn-yes");
      const btnNo = modal.querySelector(".ipp-btn-no");

      // focus dropdown
      select.focus();

      const cleanup = () => {
        document.removeEventListener("keydown", onKeyDown, true);
        isOpen = false;
        if (config.lockScroll) document.body.style.overflow = prevOverflow;
        overlay.remove();
      };

      const finish = (ok) => {
        const value = parseInt(select.value, 10);
        cleanup();
        // return an object that records user's choice
        resolve({ ok, value });
      };

      btnYes.onclick = () => finish(true);
      btnNo.onclick = () => finish(false);

      // capture keydown so p5 doesn't receive it
      const onKeyDown = (e) => {
        e.stopPropagation();
        if (e.key === "Enter") finish(true);
        if (e.key === "Escape") finish(false);
      };
      document.addEventListener("keydown", onKeyDown, true);
    });
  }

  /**
   * Returns whether the pop-up is currently open.
   * @returns {boolean} True if open, otherwise false.
   */
  function getIsOpen() {
    return isOpen;
  }

  return { render, getIsOpen };
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-plugins_confirmWindow.html">plugins/confirmWindow</a></li><li><a href="module-plugins_selNumWindow.html">plugins/selNumWindow</a></li><li><a href="module-plugins_toastsWindow.html">plugins/toastsWindow</a></li></ul><h3>Classes</h3><ul><li><a href="Board.html">Board</a></li><li><a href="Cell.html">Cell</a></li><li><a href="GameManager.html">GameManager</a></li><li><a href="Player.html">Player</a></li><li><a href="Ship.html">Ship</a></li><li><a href="Timer.html">Timer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Sat Feb 28 2026 17:31:12 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
